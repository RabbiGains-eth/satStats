(()=>{let e;n();function t(){e&&e.disconnect();e=null,n()}async function n(){if(!e){for(const e of await chrome.tabs.query({url:"*://*/*"}))try{return await chrome.scripting.executeScript({target:{tabId:e.id},function:()=>chrome.runtime.connect({name:"keepAlive"})}),void chrome.tabs.onUpdated.removeListener(o)}catch(e){}chrome.tabs.onUpdated.addListener(o)}}async function o(e,t,o){t.url&&/^(file|https?):/.test(t.url)&&n()}chrome.runtime.onConnect.removeListener((()=>{})),chrome.runtime.onConnect.addListener((n=>{"keepAlive"===n.name&&(e=n,setTimeout(t,295e3),n.onDisconnect.addListener(t))}))})();